!function(e,t,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=o(e),a=function(e){try{var n=e.property,o=(e.record,e.onChange),a=n.custom;return r.default.createElement(t.Box,{pb:"x3"},r.default.createElement(t.Label,null,Object.keys(a).length&&a.title?a.title:n.label),Object.keys(a).length?r.default.createElement("p",{style:{marginBottom:"10px",fontSize:"10px"}},a.text):null,r.default.createElement(t.DropZone,{multiple:!0,onChange:function(e){o(n.name,e[0])}}))}catch(e){console.log("edit error"),console.log(e)}},l=function(e){var n=e.record.params.file;return r.default.createElement(t.Box,null,n?r.default.createElement("img",{src:n,width:"80px"}):"No file")};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],l=!0,m=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);l=!0);}catch(e){m=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(m)throw r}}return a}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var y=function(e){var n=e.record,o=e.property,a=[],l=o.custom.propName;console.log(n.params),Object.keys(n.params).map((function(e){e.includes("".concat(l,".key"))&&a.push("/uploads/"+n.params[e])}));return r.default.createElement(t.Box,null,a.length?a.map((function(e){return r.default.createElement("img",{src:e,width:"80px"})})):"Нет файлов")},g=function(e){var n=e.property;return r.default.createElement(t.Box,{marginBottom:"25px"},r.default.createElement("span",null,n.custom.title?n.custom.title:n.label),r.default.createElement(t.Text,{fontSize:"10px"},n.custom.text))},C=function(o){var a=o.property,l=o.record,m=o.onChange,u=l.params,p=a.custom,f=n.flat.get(u,p.filePathProperty),d=n.flat.get(u,p.keyProperty),y=n.flat.get(u,p.fileProperty),g=c(e.useState(d),2),C=g[0],h=g[1],b=c(e.useState([]),2),B=b[0],A=b[1];e.useEffect((function(){("string"==typeof d&&d!==C||"string"!=typeof d&&!C||"string"!=typeof d&&Array.isArray(d)&&d.length!==C.length)&&(h(d),A([]))}),[d,C]);return r.default.createElement(t.FormGroup,null,r.default.createElement(t.Label,null,a.label),r.default.createElement(t.DropZone,{onChange:function(e){A(e),m(p.fileProperty,e)},multiple:p.multiple,validate:{mimeTypes:p.mimeTypes,maxSize:p.maxSize},files:B}),!p.multiple&&d&&f&&!B.length&&null!==y&&r.default.createElement(t.DropZoneItem,{filename:d,src:f,onRemove:function(){m(p.fileProperty,null)}}),p.multiple&&d&&d.length&&f?r.default.createElement(r.default.Fragment,null,d.map((function(e,o){return f[o]?r.default.createElement(t.DropZoneItem,{key:e,filename:e,src:f[o],onRemove:function(){return function(e){var t=(n.flat.get(l.params,p.keyProperty)||[]).indexOf(e),o=n.flat.get(l.params,p.filesToDeleteProperty)||[];if(f&&f.length>0){var r=f.map((function(e,n){return n!==t?e:null})),a=n.flat.set(l.params,p.filesToDeleteProperty,[].concat(s(o),[t]));a=n.flat.set(a,p.filePathProperty,r),m(i(i({},l),{},{params:a}))}else console.log("You cannot remove file when there are no uploaded files yet")}(e)}}):""}))):"")},h=["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","application/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp2"],b=["image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/vnd.microsoft.icon","image/tiff","image/webp"],B=function(e){var n=e.name,o=e.path,a=e.mimeType,l=e.width;if(o&&o.length){if(a&&b.includes(a))return r.default.createElement("img",{src:o,style:{maxHeight:l,maxWidth:l},alt:n});if(a&&h.includes(a))return r.default.createElement("audio",{controls:!0,src:o},"Your browser does not support the",r.default.createElement("code",null,"audio"),r.default.createElement("track",{kind:"captions"}))}return r.default.createElement(t.Box,null,r.default.createElement(t.Button,{as:"a",href:o,ml:"default",size:"sm",rounded:!0,target:"_blank"},r.default.createElement(t.Icon,{icon:"DocumentDownload",color:"white",mr:"default"}),n))},A=function(e){var t=e.width,o=e.record,a=e.property,l=a.custom,m=n.flat.get(null==o?void 0:o.params,l.filePathProperty);if(!m)return null;var i=n.flat.get(null==o?void 0:o.params,l.fileNameProperty?l.fileNameProperty:l.keyProperty),u=l.mimeTypeProperty&&n.flat.get(null==o?void 0:o.params,l.mimeTypeProperty);return a.custom.multiple?r.default.createElement(r.default.Fragment,null,m.map((function(e,n){return r.default.createElement(B,{key:e,path:e,name:i[n],width:t,mimeType:u[n]})}))):r.default.createElement(B,{path:m,name:i,width:t,mimeType:u})},v=function(e){return r.default.createElement(A,p({width:100},e))},E=function(e){var n=e.property;return r.default.createElement(t.FormGroup,null,r.default.createElement(t.Label,null,n.label),r.default.createElement(A,p({width:"100%"},e)))},U=function(e){var n=e.record.params,o="/uploads/".concat(n._id,"/").concat(n["cover.filename"]);return r.default.createElement(t.Box,null,r.default.createElement("img",{src:o,width:"80px",style:{marginBottom:"15px"}}))},w=function(e){var n=e.record.params,o=[];Object.keys(n).map((function(e){e.includes(".name")&&o.push(n[e])})),console.log(o);return r.default.createElement(t.Box,null,r.default.createElement(t.Label,{marginBottom:"10px"},"Track List"),r.default.createElement("ol",{style:{listStyleType:"decimal",marginBottom:"20px"}},o.length?o.map((function(e){return r.default.createElement("li",null,e)})):null))};AdminBro.UserComponents={},AdminBro.UserComponents.Component1=a,AdminBro.UserComponents.Component2=l,AdminBro.UserComponents.Component3=function(e){var n=c(r.default.useState(new Date),2),o=n[0],a=n[1],l=e.property,m=e.record,i=l.custom;return r.default.createElement(t.Box,{pb:"x3"},r.default.createElement(t.Label,null,"День рождения"),r.default.createElement("p",{style:{marginBottom:"10px",fontSize:"10px"}},i?i.text:""),r.default.createElement(t.DatePicker,{value:o,onChange:function(e){a(e),m.params.birthday=e},showYearDropdown:!0,scrollableYearDropdown:!0,yearDropdownItemNumber:30,showTimeSelect:!1,dateFormat:"DD-MM-YYYY"}))},AdminBro.UserComponents.Component4=a,AdminBro.UserComponents.Component5=l,AdminBro.UserComponents.Component6=y,AdminBro.UserComponents.Component7=y,AdminBro.UserComponents.Component8=g,AdminBro.UserComponents.Component9=g,AdminBro.UserComponents.Component10=C,AdminBro.UserComponents.Component11=v,AdminBro.UserComponents.Component12=E,AdminBro.UserComponents.Component13=y,AdminBro.UserComponents.Component14=y,AdminBro.UserComponents.Component15=g,AdminBro.UserComponents.Component16=g,AdminBro.UserComponents.Component17=g,AdminBro.UserComponents.Component18=g,AdminBro.UserComponents.Component19=C,AdminBro.UserComponents.Component20=v,AdminBro.UserComponents.Component21=E,AdminBro.UserComponents.Component22=U,AdminBro.UserComponents.Component23=U,AdminBro.UserComponents.Component24=w,AdminBro.UserComponents.Component25=w,AdminBro.UserComponents.Component26=g,AdminBro.UserComponents.Component27=g,AdminBro.UserComponents.Component28=g,AdminBro.UserComponents.Component29=g,AdminBro.UserComponents.Component30=C,AdminBro.UserComponents.Component31=v,AdminBro.UserComponents.Component32=E,AdminBro.UserComponents.Component33=C,AdminBro.UserComponents.Component34=v,AdminBro.UserComponents.Component35=E}(React,AdminBroDesignSystem,AdminBro);
